var Vr=Object.create;var ze=Object.defineProperty;var Hr=Object.getOwnPropertyDescriptor;var Kr=Object.getOwnPropertyNames;var $r=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty;var zr=s=>ze(s,"__esModule",{value:!0});var o=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports);var Xr=(s,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Kr(e))!Qr.call(s,i)&&(t||i!=="default")&&ze(s,i,{get:()=>e[i],enumerable:!(r=Hr(e,i))||r.enumerable});return s},Cr=(s,e)=>Xr(zr(ze(s!=null?Vr($r(s)):{},"default",!e&&s&&s.__esModule?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var I=o(v=>{"use strict";Object.defineProperty(v,"__esModule",{value:!0});v.API_V1_1_STREAM_PREFIX=v.API_V1_1_UPLOAD_PREFIX=v.API_V1_1_PREFIX=v.API_V2_LABS_PREFIX=v.API_V2_PREFIX=void 0;v.API_V2_PREFIX="https://api.twitter.com/2/";v.API_V2_LABS_PREFIX="https://api.twitter.com/labs/2/";v.API_V1_1_PREFIX="https://api.twitter.com/1.1/";v.API_V1_1_UPLOAD_PREFIX="https://upload.twitter.com/1.1/";v.API_V1_1_STREAM_PREFIX="https://stream.twitter.com/1.1/"});var K=o(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.PreviousableTwitterPaginator=H.TwitterPaginator=void 0;var je=class{constructor({realData:e,rateLimit:t,instance:r,queryParams:i,sharedParams:n}){this._maxResultsWhenFetchLast=100,this._realData=e,this._rateLimit=t,this._instance=r,this._queryParams=i,this._sharedParams=n}get _isRateLimitOk(){return this._rateLimit.reset*1e3<Date.now()?!0:this._rateLimit.remaining>0}makeRequest(e){return this._instance.get(this.getEndpoint(),e,{fullResponse:!0,params:this._sharedParams})}makeNewInstanceFromResult(e,t){return new this.constructor({realData:e.data,rateLimit:e.rateLimit,instance:this._instance,queryParams:t,sharedParams:this._sharedParams})}getEndpoint(){return this._endpoint}injectQueryParams(e){return{...e?{max_results:e}:{},...this._queryParams}}async next(e){let t=this.getNextQueryParams(e),r=await this.makeRequest(t);return this.makeNewInstanceFromResult(r,t)}async fetchNext(e){let t=this.getNextQueryParams(e),r=await this.makeRequest(t);return await this.refreshInstanceFromResult(r,!0),this}async fetchLast(e=1/0){let t=this.getNextQueryParams(this._maxResultsWhenFetchLast),r=0;for(;r<e&&this._isRateLimitOk;){let i=await this.makeRequest(t);if(await this.refreshInstanceFromResult(i,!0),r+=this.getPageLengthFromRequest(i),this.isFetchLastOver(i))break;t=this.getNextQueryParams(this._maxResultsWhenFetchLast)}return this}get rateLimit(){return{...this._rateLimit}}get data(){return this._realData}*[Symbol.iterator](){yield*this.getItemArray()}async*[Symbol.asyncIterator](){yield*this.getItemArray();let e=this;for(;this._isRateLimitOk&&e.getItemArray().length>0;){let t=await e.next(this._maxResultsWhenFetchLast);this._rateLimit=t._rateLimit,yield*t.getItemArray(),e=t}}};H.TwitterPaginator=je;var Bt=class extends je{async previous(e){let t=this.getPreviousQueryParams(e),r=await this.makeRequest(t);return this.makeNewInstanceFromResult(r,t)}async fetchPrevious(e){let t=this.getPreviousQueryParams(e),r=await this.makeRequest(t);return await this.refreshInstanceFromResult(r,!1),this}};H.PreviousableTwitterPaginator=Bt;H.default=je});var ae=o(Y=>{"use strict";var Yr=Y&&Y.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Y,"__esModule",{value:!0});Y.CursoredV1Paginator=void 0;var Jr=Yr(K()),kt=class extends Jr.default{getNextQueryParams(e){var t;return{...this._queryParams,cursor:(t=this._realData.next_cursor_str)!==null&&t!==void 0?t:this._realData.next_cursor,...e?{count:e}:{}}}isFetchLastOver(e){return this.isNextCursorInvalid(e.data.next_cursor)&&this.isNextCursorInvalid(e.data.next_cursor_str)}isNextCursorInvalid(e){return e===void 0||e===0||e===-1||e==="0"||e==="-1"}};Y.CursoredV1Paginator=kt});var Xe=o(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.WelcomeDmV1Paginator=J.DmEventsV1Paginator=void 0;var Nt=ae(),Wt=class extends Nt.CursoredV1Paginator{constructor(){super(...arguments);this._endpoint="direct_messages/events/list.json"}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.events.push(...r.events),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.events.length}getItemArray(){return this.events}get events(){return this._realData.events}};J.DmEventsV1Paginator=Wt;var Et=class extends Nt.CursoredV1Paginator{constructor(){super(...arguments);this._endpoint="direct_messages/welcome_messages/list.json"}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.welcome_messages.push(...r.welcome_messages),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.welcome_messages.length}getItemArray(){return this.welcomeMessages}get welcomeMessages(){return this._realData.welcome_messages}};J.WelcomeDmV1Paginator=Et});var Ht=o(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0})});var $t=o(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0})});var zt=o(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0})});var Ct=o(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0})});var Jt=o(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0})});var Zt=o(Gt=>{"use strict";Object.defineProperty(Gt,"__esModule",{value:!0})});var ts=o(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0})});var ss=o(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.EDirectMessageEventTypeV1=void 0;var Gr;(function(s){s.Create="message_create",s.WelcomeCreate="welcome_message"})(Gr=oe.EDirectMessageEventTypeV1||(oe.EDirectMessageEventTypeV1={}))});var is=o(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0})});var ns=o(f=>{"use strict";var Zr=f&&f.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),U=f&&f.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Zr(e,s,t)};Object.defineProperty(f,"__esModule",{value:!0});U(Ht(),f);U($t(),f);U(zt(),f);U(Ct(),f);U(Jt(),f);U(Zt(),f);U(ts(),f);U(ss(),f);U(is(),f)});var os=o(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0})});var cs=o(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0})});var ds=o(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0})});var _s=o(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0})});var fs=o(ms=>{"use strict";Object.defineProperty(ms,"__esModule",{value:!0})});var gs=o(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0})});var ws=o(P=>{"use strict";var ei=P&&P.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),G=P&&P.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ei(e,s,t)};Object.defineProperty(P,"__esModule",{value:!0});G(os(),P);G(cs(),P);G(ds(),P);G(_s(),P);G(fs(),P);G(gs(),P)});var Ps=o(p=>{"use strict";Object.defineProperty(p,"__esModule",{value:!0});p.EApiV2ErrorCode=p.EApiV1ErrorCode=p.ApiResponseError=p.ApiRequestError=p.ETwitterApiError=void 0;var Ce;(function(s){s.Request="request",s.Response="response"})(Ce=p.ETwitterApiError||(p.ETwitterApiError={}));var Ye=class extends Error{constructor(){super(...arguments);this.error=!0}},ys=class extends Ye{constructor(e,t){super(e);this.type=Ce.Request,Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"_options",{value:t})}get request(){return this._options.request}get requestError(){return this._options.requestError}};p.ApiRequestError=ys;var vs=class extends Ye{constructor(e,t){super(e);this.type=Ce.Response,Error.captureStackTrace(this,this.constructor),Object.defineProperty(this,"_options",{value:t}),this.code=t.code,this.headers=t.headers,this.rateLimit=t.rateLimit,this.data=t.data}get request(){return this._options.request}get response(){return this._options.response}hasErrorCode(...e){let t=this.errors;if(!(t==null?void 0:t.length))return!1;if("code"in t[0])return t.some(n=>e.includes(n.code));let r=this.data;return e.includes(r.type)}get errors(){var e;return(e=this.data)===null||e===void 0?void 0:e.errors}get rateLimitError(){return this.code===420||this.code===429}get isAuthError(){return this.code===401?!0:this.hasErrorCode(ue.AuthTimestampInvalid,ue.AuthenticationFail,ue.BadAuthenticationData,ue.InvalidOrExpiredToken)}};p.ApiResponseError=vs;var ue;(function(s){s[s.InvalidCoordinates=3]="InvalidCoordinates",s[s.NoLocationFound=13]="NoLocationFound",s[s.AuthenticationFail=32]="AuthenticationFail",s[s.InvalidOrExpiredToken=89]="InvalidOrExpiredToken",s[s.UnableToVerifyCredentials=99]="UnableToVerifyCredentials",s[s.AuthTimestampInvalid=135]="AuthTimestampInvalid",s[s.BadAuthenticationData=215]="BadAuthenticationData",s[s.NoUserMatch=17]="NoUserMatch",s[s.UserNotFound=50]="UserNotFound",s[s.ResourceNotFound=34]="ResourceNotFound",s[s.TweetNotFound=144]="TweetNotFound",s[s.TweetNotVisible=179]="TweetNotVisible",s[s.NotAllowedResource=220]="NotAllowedResource",s[s.MediaIdNotFound=325]="MediaIdNotFound",s[s.TweetNoLongerAvailable=421]="TweetNoLongerAvailable",s[s.TweetViolatedRules=422]="TweetViolatedRules",s[s.TargetUserSuspended=63]="TargetUserSuspended",s[s.YouAreSuspended=64]="YouAreSuspended",s[s.AccountUpdateFailed=120]="AccountUpdateFailed",s[s.NoSelfSpamReport=36]="NoSelfSpamReport",s[s.NoSelfMute=271]="NoSelfMute",s[s.AccountLocked=326]="AccountLocked",s[s.RateLimitExceeded=88]="RateLimitExceeded",s[s.NoDMRightForApp=93]="NoDMRightForApp",s[s.OverCapacity=130]="OverCapacity",s[s.InternalError=131]="InternalError",s[s.TooManyFollowings=161]="TooManyFollowings",s[s.TweetLimitExceeded=185]="TweetLimitExceeded",s[s.DuplicatedTweet=187]="DuplicatedTweet",s[s.TooManySpamReports=205]="TooManySpamReports",s[s.RequestLooksLikeSpam=226]="RequestLooksLikeSpam",s[s.NoWriteRightForApp=261]="NoWriteRightForApp",s[s.TweetActionsDisabled=425]="TweetActionsDisabled",s[s.TweetRepliesRestricted=433]="TweetRepliesRestricted",s[s.NamedParameterMissing=38]="NamedParameterMissing",s[s.InvalidAttachmentUrl=44]="InvalidAttachmentUrl",s[s.TweetTextTooLong=186]="TweetTextTooLong",s[s.MissingUrlParameter=195]="MissingUrlParameter",s[s.NoMultipleGifs=323]="NoMultipleGifs",s[s.InvalidMediaIds=324]="InvalidMediaIds",s[s.InvalidUrl=407]="InvalidUrl",s[s.TooManyTweetAttachments=386]="TooManyTweetAttachments",s[s.StatusAlreadyFavorited=139]="StatusAlreadyFavorited",s[s.FollowRequestAlreadySent=160]="FollowRequestAlreadySent",s[s.CannotUnmuteANonMutedAccount=272]="CannotUnmuteANonMutedAccount",s[s.TweetAlreadyRetweeted=327]="TweetAlreadyRetweeted",s[s.ReplyToDeletedTweet=385]="ReplyToDeletedTweet",s[s.DMReceiverNotFollowingYou=150]="DMReceiverNotFollowingYou",s[s.UnableToSendDM=151]="UnableToSendDM",s[s.MustAllowDMFromAnyone=214]="MustAllowDMFromAnyone",s[s.CannotSendDMToThisUser=349]="CannotSendDMToThisUser",s[s.DMTextTooLong=354]="DMTextTooLong",s[s.SubscriptionAlreadyExists=355]="SubscriptionAlreadyExists",s[s.CallbackUrlNotApproved=415]="CallbackUrlNotApproved",s[s.SuspendedApplication=416]="SuspendedApplication",s[s.OobOauthIsNotAllowed=417]="OobOauthIsNotAllowed"})(ue=p.EApiV1ErrorCode||(p.EApiV1ErrorCode={}));var ti;(function(s){s.InvalidRequest="https://api.twitter.com/2/problems/invalid-request",s.ClientForbidden="https://api.twitter.com/2/problems/client-forbidden",s.UnsupportedAuthentication="https://api.twitter.com/2/problems/unsupported-authentication",s.InvalidRules="https://api.twitter.com/2/problems/invalid-rules",s.TooManyRules="https://api.twitter.com/2/problems/rule-cap",s.DuplicatedRules="https://api.twitter.com/2/problems/duplicate-rules",s.RateLimitExceeded="https://api.twitter.com/2/problems/usage-capped",s.ConnectionError="https://api.twitter.com/2/problems/streaming-connection",s.ClientDisconnected="https://api.twitter.com/2/problems/client-disconnected",s.TwitterDisconnectedYou="https://api.twitter.com/2/problems/operational-disconnect",s.ResourceNotFound="https://api.twitter.com/2/problems/resource-not-found",s.ResourceUnauthorized="https://api.twitter.com/2/problems/not-authorized-for-resource",s.DisallowedResource="https://api.twitter.com/2/problems/disallowed-resource"})(ti=p.EApiV2ErrorCode||(p.EApiV2ErrorCode={}))});var Ts=o(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0})});var Rs=o(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.ETwitterStreamEvent=void 0;var si;(function(s){s.Connected="connected",s.ConnectionError="connection error",s.ConnectionClosed="connection closed",s.ConnectionLost="connection lost",s.ReconnectAttempt="reconnect attempt",s.Reconnected="reconnected",s.ReconnectError="reconnect error",s.ReconnectLimitExceeded="reconnect limit exceeded",s.DataKeepAlive="data keep-alive",s.Data="data event content",s.DataError="data twitter error",s.TweetParseError="data tweet parse error",s.Error="stream error"})(si=ce.ETwitterStreamEvent||(ce.ETwitterStreamEvent={}))});var Ss=o(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0})});var ee=o(b=>{"use strict";var ri=b&&b.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),Z=b&&b.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&ri(e,s,t)};Object.defineProperty(b,"__esModule",{value:!0});Z(ns(),b);Z(ws(),b);Z(Ps(),b);Z(Ts(),b);Z(Rs(),b);Z(Ss(),b)});var Ie=o(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.TwitterApiV2Settings=void 0;Me.TwitterApiV2Settings={debug:!1,deprecationWarnings:!0}});var Ge=o($=>{"use strict";var ii=$&&$.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty($,"__esModule",{value:!0});$.RequestHandlerHelper=void 0;var ni=require("https"),le=Ie(),ai=ii(Oe()),Ds=ee(),Je=class{constructor(e){this.requestData=e,this.responseData=""}get hrefPathname(){let e=this.requestData.url;return e.hostname+e.pathname}isFormEncodedEndpoint(){return this.requestData.url.href.startsWith("https://api.twitter.com/oauth/")}getRateLimitFromResponse(e){let t;return e.headers["x-rate-limit-limit"]&&(t={limit:Number(e.headers["x-rate-limit-limit"]),remaining:Number(e.headers["x-rate-limit-remaining"]),reset:Number(e.headers["x-rate-limit-reset"])},this.requestData.rateLimitSaver&&this.requestData.rateLimitSaver(t)),t}createRequestError(e){return le.TwitterApiV2Settings.debug&&console.log("Request network error:",e),new Ds.ApiRequestError("Request failed.",{request:this.req,error:e})}formatV1Errors(e){return e.map(({code:t,message:r})=>`${r} (Twitter code ${t})`).join(", ")}formatV2Error(e){return`${e.title}: ${e.detail} (see ${e.type})`}createResponseError({res:e,data:t,rateLimit:r,code:i}){var n;le.TwitterApiV2Settings.debug&&console.log("Request failed with code",i,", data:",t,"response headers:",e.headers);let a=`Request failed with code ${i}`;if((n=t==null?void 0:t.errors)===null||n===void 0?void 0:n.length){let u=t.errors;"code"in u[0]?a+=" - "+this.formatV1Errors(u):a+=" - "+this.formatV2Error(t)}return new Ds.ApiResponseError(a,{code:i,data:t,headers:e.headers,request:this.req,response:e,rateLimit:r})}getParsedResponse(e){var t;let r=this.responseData;if(r.length&&((t=e.headers["content-type"])===null||t===void 0?void 0:t.includes("application/json")))r=JSON.parse(r);else if(this.isFormEncodedEndpoint()){let i={};for(let[n,a]of new URLSearchParams(r))i[n]=a;r=i}return r}requestErrorHandler(e,t){e(this.createRequestError(t))}classicResponseHandler(e,t,r){r.on("data",i=>this.responseData+=i),r.on("end",this.onResponseEndHandler.bind(this,e,t,r))}onResponseEndHandler(e,t,r){let i=this.getRateLimitFromResponse(r),n=this.getParsedResponse(r),a=r.statusCode;a>=400&&t(this.createResponseError({data:n,res:r,rateLimit:i,code:a})),le.TwitterApiV2Settings.debug&&(console.log(`[${this.requestData.options.method} ${this.hrefPathname}]: Request succeeds with code ${r.statusCode}`),console.log("Response body:",n)),e({data:n,headers:r.headers,rateLimit:i})}streamResponseHandler(e,t,r){r.statusCode<400?(le.TwitterApiV2Settings.debug&&console.log(`[${this.requestData.options.method} ${this.hrefPathname}]: Request succeeds with code ${r.statusCode} (starting stream)`),e({req:this.req,res:r,requestData:this.requestData})):this.classicResponseHandler(()=>{},t,r)}debugRequest(){let e=this.requestData.url;console.log(`[${this.requestData.options.method} ${this.hrefPathname}]`,this.requestData.options),e.search&&console.log("Request parameters:",[...e.searchParams.entries()].map(([t,r])=>`${t}: ${r}`)),this.requestData.body&&console.log("Request body:",this.requestData.body)}buildRequest(){le.TwitterApiV2Settings.debug&&this.debugRequest();let e=this.requestData.url,t=e.username?`${e.username}:${e.password}`:void 0;this.req=ni.request({...this.requestData.options,host:e.hostname,port:e.port||void 0,path:e.pathname+e.search,protocol:e.protocol,auth:t})}makeRequest(){return this.buildRequest(),new Promise((e,t)=>{let r=this.req;r.on("error",this.requestErrorHandler.bind(this,t)),r.on("response",this.classicResponseHandler.bind(this,e,t)),this.requestData.body&&r.write(this.requestData.body),r.end()})}async makeRequestAsStream(){let{req:e,res:t,requestData:r}=await this.makeRequestAndResolveWhenReady();return new ai.default(r,e,t)}makeRequestAndResolveWhenReady(){return this.buildRequest(),new Promise((e,t)=>{let r=this.req;r.on("error",this.requestErrorHandler.bind(this,t)),r.on("response",this.streamResponseHandler.bind(this,e,t)),this.requestData.body&&r.write(this.requestData.body),r.end()})}};$.RequestHandlerHelper=Je;$.default=Je});var Ls=o(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.TweetStreamEventCombiner=void 0;var oi=require("events"),N=ee(),Ze=class extends oi.EventEmitter{constructor(e){super();this.stream=e,this.stack=[],this.onStreamData=this.onStreamData.bind(this),this.onStreamError=this.onStreamError.bind(this),this.onceNewEvent=this.once.bind(this,"event"),e.on(N.ETwitterStreamEvent.Data,this.onStreamData),e.on(N.ETwitterStreamEvent.ConnectionError,this.onStreamError),e.on(N.ETwitterStreamEvent.TweetParseError,this.onStreamError),e.on(N.ETwitterStreamEvent.ConnectionClosed,this.onStreamError)}nextEvent(){return new Promise(this.onceNewEvent)}hasStack(){return this.stack.length>0}popStack(){let e=this.stack;return this.stack=[],e}destroy(){this.removeAllListeners(),this.stream.off(N.ETwitterStreamEvent.Data,this.onStreamData),this.stream.off(N.ETwitterStreamEvent.ConnectionError,this.onStreamError),this.stream.off(N.ETwitterStreamEvent.TweetParseError,this.onStreamError),this.stream.off(N.ETwitterStreamEvent.ConnectionClosed,this.onStreamError)}emitEvent(e,t){this.emit("event",{type:e,payload:t})}onStreamError(e){this.emitEvent("error",e)}onStreamData(e){this.stack.push(e),this.emitEvent("data",e)}};de.TweetStreamEventCombiner=Ze;de.default=Ze});var Ms=o(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.EStreamParserEvent=void 0;var ui=require("events"),js=class extends ui.EventEmitter{constructor(){super(...arguments);this.currentMessage=""}push(e){this.currentMessage+=e,e=this.currentMessage;let t=e.length,r=0,i=0;for(;i<t;){if(e.slice(i,i+2)===`\r
`){let n=e.slice(r,i);if(r=i+=2,!n.length)continue;try{let a=JSON.parse(n);if(a){this.emit(et.ParsedData,a);continue}}catch(a){this.emit(et.ParseError,a)}}i++}this.currentMessage=e.slice(r,t)}reset(){this.currentMessage=""}};te.default=js;var et;(function(s){s.ParsedData="parsed data",s.ParseError="parse error"})(et=te.EStreamParserEvent||(te.EStreamParserEvent={}))});var Oe=o(y=>{"use strict";var ci=y&&y.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),li=y&&y.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),di=y&&y.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&ci(e,s,t);return li(e,s),e},Is=y&&y.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(y,"__esModule",{value:!0});y.TweetStream=void 0;var hi=require("events"),Os=Is(Ge()),d=ee(),_i=Is(Ls()),tt=di(Ms()),mi=s=>Math.min(s**2*1e3,25e3),st=class extends hi.EventEmitter{constructor(e,t,r){super();this.requestData=e,this.autoReconnect=!1,this.autoReconnectRetries=5,this.keepAliveTimeoutMs=1e3*120,this.nextRetryTimeout=mi,this.parser=new tt.default,this.onKeepAliveTimeout=this.onKeepAliveTimeout.bind(this),this.initEventsFromParser(),t&&r&&(this.req=t,this.res=r,this.initEventsFromRequest())}on(e,t){return super.on(e,t)}initEventsFromRequest(){if(!this.req||!this.res)throw new Error("TweetStream error: You cannot init TweetStream without a request and response object.");let e=t=>{this.emit(d.ETwitterStreamEvent.ConnectionError,t),this.emit(d.ETwitterStreamEvent.Error,{type:d.ETwitterStreamEvent.ConnectionError,error:t}),this.onConnectionError()};this.req.on("error",e),this.res.on("error",e),this.res.on("close",()=>e(new Error("Connection closed by Twitter."))),this.res.on("data",t=>{if(this.resetKeepAliveTimeout(),t.toString()===`\r
`)return this.emit(d.ETwitterStreamEvent.DataKeepAlive);this.parser.push(t.toString())}),this.resetKeepAliveTimeout()}initEventsFromParser(){let e=this.requestData.payloadIsError;this.parser.on(tt.EStreamParserEvent.ParsedData,t=>{e&&e(t)?(this.emit(d.ETwitterStreamEvent.DataError,t),this.emit(d.ETwitterStreamEvent.Error,{type:d.ETwitterStreamEvent.DataError,error:t})):this.emit(d.ETwitterStreamEvent.Data,t)}),this.parser.on(tt.EStreamParserEvent.ParseError,t=>{this.emit(d.ETwitterStreamEvent.TweetParseError,t),this.emit(d.ETwitterStreamEvent.Error,{type:d.ETwitterStreamEvent.TweetParseError,error:t})})}resetKeepAliveTimeout(){this.unbindKeepAliveTimeout(),this.keepAliveTimeoutMs!==1/0&&(this.keepAliveTimeout=setTimeout(this.onKeepAliveTimeout,this.keepAliveTimeoutMs))}onKeepAliveTimeout(){this.emit(d.ETwitterStreamEvent.ConnectionLost),this.onConnectionError()}unbindTimeouts(){this.unbindRetryTimeout(),this.unbindKeepAliveTimeout()}unbindKeepAliveTimeout(){this.keepAliveTimeout&&(clearTimeout(this.keepAliveTimeout),this.keepAliveTimeout=void 0)}unbindRetryTimeout(){this.retryTimeout&&(clearTimeout(this.retryTimeout),this.retryTimeout=void 0)}closeWithoutEmit(){this.unbindTimeouts(),this.res&&this.res.removeAllListeners(),this.req&&(this.req.removeAllListeners(),this.req.destroy())}close(){this.emit(d.ETwitterStreamEvent.ConnectionClosed),this.closeWithoutEmit()}destroy(){this.removeAllListeners(),this.close()}async clone(){let t=await new Os.default(this.requestData).makeRequestAsStream(),r=this.eventNames();for(let i of r){let n=this.listeners(i);for(let a of n)t.on(i,a)}return t}async connect(e={}){return typeof e.autoReconnect!="undefined"&&(this.autoReconnect=e.autoReconnect),typeof e.autoReconnectRetries!="undefined"&&(this.autoReconnectRetries=e.autoReconnectRetries==="unlimited"?1/0:e.autoReconnectRetries),typeof e.keepAliveTimeout!="undefined"&&(this.keepAliveTimeoutMs=e.keepAliveTimeout==="disable"?1/0:e.keepAliveTimeout),typeof e.nextRetryTimeout!="undefined"&&(this.nextRetryTimeout=e.nextRetryTimeout),await this.reconnect(),this}async reconnect(){let e=!0;this.req&&(e=!1,this.req.destroyed||this.closeWithoutEmit());let{req:t,res:r}=await new Os.default(this.requestData).makeRequestAndResolveWhenReady();this.req=t,this.res=r,this.emit(e?d.ETwitterStreamEvent.Connected:d.ETwitterStreamEvent.Reconnected),this.parser.reset(),this.initEventsFromRequest()}async onConnectionError(e=0){if(this.unbindTimeouts(),this.req&&!this.req.destroyed&&this.closeWithoutEmit(),!this.autoReconnect){this.emit(d.ETwitterStreamEvent.ConnectionClosed);return}if(e>=this.autoReconnectRetries){this.emit(d.ETwitterStreamEvent.ReconnectLimitExceeded),this.emit(d.ETwitterStreamEvent.ConnectionClosed);return}try{this.emit(d.ETwitterStreamEvent.ReconnectAttempt,e),await this.reconnect()}catch{this.emit(d.ETwitterStreamEvent.ReconnectError,e),this.emit(d.ETwitterStreamEvent.Error,{type:d.ETwitterStreamEvent.ReconnectError,error:new Error(`Reconnect error - ${e+1} attempts made yet.`)}),this.makeAutoReconnectRetry(e)}}makeAutoReconnectRetry(e){let t=this.nextRetryTimeout(e+1);this.retryTimeout=setTimeout(()=>{this.onConnectionError(e+1)},t)}async*[Symbol.asyncIterator](){let e=new _i.default(this);try{for(;;){if(!this.req||this.req.aborted)throw new Error("Connection closed");e.hasStack()&&(yield*e.popStack());let{type:t,payload:r}=await e.nextEvent();if(t==="error")throw r}}finally{e.destroy()}}};y.TweetStream=st;y.default=st});var se=o(T=>{"use strict";Object.defineProperty(T,"__esModule",{value:!0});T.safeDeprecationWarning=T.hasMultipleItems=T.isTweetStreamV2ErrorPayload=T.trimUndefinedProperties=T.arrayWrap=void 0;var fi=Ie();function pi(s){return Array.isArray(s)?s:[s]}T.arrayWrap=pi;function gi(s){for(let e in s)s[e]===void 0&&delete s[e]}T.trimUndefinedProperties=gi;function wi(s){return typeof s=="object"&&"errors"in s&&!("data"in s)}T.isTweetStreamV2ErrorPayload=wi;function yi(s){return Array.isArray(s)&&s.length>1?!0:s.toString().includes(",")}T.hasMultipleItems=yi;var As=new Set;function vi(s){if(typeof console=="undefined"||!console.warn||!fi.TwitterApiV2Settings.deprecationWarnings)return;let e=`${s.instance}-${s.method}-${s.problem}`;if(As.has(e))return;let t=`[twitter-api-v2] Deprecation warning: In ${s.instance}.${s.method}() call, ${s.problem}.
${s.resolution}.`;console.warn(t),console.warn("To disable this message, import TwitterApiV2Settings from twitter-api-v2 and set TwitterApiV2Settings.deprecationWarnings to false."),As.add(e)}T.safeDeprecationWarning=vi});var Us=o(D=>{"use strict";var Pi=D&&D.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),bi=D&&D.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),Ti=D&&D.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&Pi(e,s,t);return bi(e,s),e};Object.defineProperty(D,"__esModule",{value:!0});D.OAuth1Helper=void 0;var Ri=Ti(require("crypto")),rt=class{constructor(e){this.nonceLength=32,this.consumerKeys=e.consumerKeys}hash(e,t){return Ri.createHmac("sha1",t).update(e).digest("base64")}authorize(e,t={}){let r={oauth_consumer_key:this.consumerKeys.key,oauth_nonce:this.getNonce(),oauth_signature_method:"HMAC-SHA1",oauth_timestamp:this.getTimestamp(),oauth_version:"1.0"};return t.key!==void 0&&(r.oauth_token=t.key),e.data||(e.data={}),r.oauth_signature=this.getSignature(e,t.secret,r),r}toHeader(e){let t=xs(e),r="OAuth ";for(let i of t)i.key.indexOf("oauth_")===0&&(r+=B(i.key)+'="'+B(i.value)+'",');return{Authorization:r.slice(0,r.length-1)}}getNonce(){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t="";for(let r=0;r<this.nonceLength;r++)t+=e[Math.trunc(Math.random()*e.length)];return t}getTimestamp(){return Math.trunc(new Date().getTime()/1e3)}getSignature(e,t,r){return this.hash(this.getBaseString(e,r),this.getSigningKey(t))}getSigningKey(e){return B(this.consumerKeys.secret)+"&"+B(e||"")}getBaseString(e,t){return e.method.toUpperCase()+"&"+B(this.getBaseUrl(e.url))+"&"+B(this.getParameterString(e,t))}getParameterString(e,t){let r=xs(Di(Fs(t,Fs(e.data,Si(e.url))))),i="";for(let{key:n,value:a}of r)if(a&&Array.isArray(a)){a.sort();let u="";a.forEach((l,g)=>{u+=n+"="+l,g<a.length&&(u+="&")}),i+=u}else i+=n+"="+a+"&";return i.slice(0,i.length-1)}getBaseUrl(e){return e.split("?")[0]}};D.OAuth1Helper=rt;D.default=rt;function Fs(s,e){return{...s||{},...e||{}}}function xs(s){return Object.keys(s).sort().map(e=>({key:e,value:s[e]}))}function qi(s){let e=s.split("&"),t={};for(let r of e){let[i,n=""]=r.split("=");t[i]?(Array.isArray(t[i])||(t[i]=[t[i]]),t[i].push(decodeURIComponent(n))):t[i]=decodeURIComponent(n)}return t}function Si(s){let e=s.split("?");return e.length===1?{}:qi(e[1])}function B(s){return encodeURIComponent(s).replace(/!/g,"%21").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}function Di(s){let e={};for(let t in s){let r=s[t];r&&Array.isArray(r)?r=r.map(i=>B(i)):r=B(r),e[B(t)]=r}return e}});var Bs=o(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.FormDataHelper=void 0;var Li=se(),L=class{constructor(){this._boundary="",this._chunks=[]}bodyAppend(...e){let t=e.map(r=>r instanceof Buffer?r:Buffer.from(r));this._chunks.push(...t)}append(e,t,r){let i=t instanceof Buffer?t:t.toString(),n=this.getMultipartHeader(e,i,r);this.bodyAppend(n,i,L.LINE_BREAK)}getHeaders(){return{"content-type":"multipart/form-data; boundary="+this.getBoundary()}}getLength(){return this._chunks.reduce((e,t)=>e+t.length,this.getMultipartFooter().length)}getBuffer(){let e=[...this._chunks,this.getMultipartFooter()],t=Buffer.alloc(this.getLength()),r=0;for(let i of e)for(let n=0;n<i.length;r++,n++)t[r]=i[n];return t}getBoundary(){return this._boundary||this.generateBoundary(),this._boundary}generateBoundary(){let e="--------------------------";for(let t=0;t<24;t++)e+=Math.floor(Math.random()*10).toString(16);this._boundary=e}getMultipartHeader(e,t,r){r||(r=t instanceof Buffer?L.DEFAULT_CONTENT_TYPE:"");let i={"Content-Disposition":["form-data",`name="${e}"`],"Content-Type":r},n="";for(let[a,u]of Object.entries(i))!u.length||(n+=a+": "+Li.arrayWrap(u).join("; ")+L.LINE_BREAK);return"--"+this.getBoundary()+L.LINE_BREAK+n+L.LINE_BREAK}getMultipartFooter(){return this._footerChunk?this._footerChunk:this._footerChunk=Buffer.from("--"+this.getBoundary()+"--"+L.LINE_BREAK)}};Ae.FormDataHelper=L;L.LINE_BREAK=`\r
`;L.DEFAULT_CONTENT_TYPE="application/octet-stream"});var ks=o(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.RequestParamHelpers=void 0;var ji=Bs(),Fe=class{static formatQueryToString(e){let t={};for(let r in e)typeof e[r]=="string"?t[r]=e[r]:typeof e[r]!="undefined"&&(t[r]=String(e[r]));return t}static autoDetectBodyType(e){if(e.pathname.startsWith("/2/")||e.pathname.startsWith("/labs/2/"))return e.password.startsWith("/2/oauth2")?"url":"json";if(e.hostname==="upload.twitter.com")return e.pathname==="/1.1/media/upload.json"?"form-data":"json";let t=e.pathname.split("/1.1/",2)[1];return this.JSON_1_1_ENDPOINTS.has(t)?"json":"url"}static addQueryParamsToUrl(e,t){for(let[r,i]of Object.entries(t))e.searchParams.append(r,i);e.search&&(e.search=e.search.replace(/\*/g,"%2A"))}static constructBodyParams(e,t,r){if(e instanceof Buffer)return e;if(r==="json")return t["content-type"]="application/json;charset=UTF-8",JSON.stringify(e);if(r==="url")return t["content-type"]="application/x-www-form-urlencoded;charset=UTF-8",Object.keys(e).length?new URLSearchParams(e).toString().replace(/\*/g,"%2A"):"";if(r==="raw")throw new Error("You can only use raw body mode with Buffers. To give a string, use Buffer.from(str).");{let i=new ji.FormDataHelper;for(let a in e)i.append(a,e[a]);let n=i.getHeaders();return t["content-type"]=n["content-type"],i.getBuffer()}}static setBodyLengthHeader(e,t){var r;e.headers=(r=e.headers)!==null&&r!==void 0?r:{},typeof t=="string"?e.headers["content-length"]=Buffer.byteLength(t):e.headers["content-length"]=t.length}static isOAuthSerializable(e){return!(e instanceof Buffer)}static mergeQueryAndBodyForOAuth(e,t){let r={};for(let i in e)r[i]=e[i];if(this.isOAuthSerializable(t))for(let i in t){let n=t[i];this.isOAuthSerializable(n)&&(r[i]=typeof n=="object"&&n!==null&&"toString"in n?n.toString():n)}return r}static moveUrlQueryParamsIntoObject(e,t){for(let[r,i]of e.searchParams)t[r]=i;return e.search="",e}static applyRequestParametersToUrl(e,t){return e.pathname=e.pathname.replace(/:([A-Z_-]+)/ig,(r,i)=>t[i]!==void 0?String(t[i]):r),e}};he.RequestParamHelpers=Fe;Fe.JSON_1_1_ENDPOINTS=new Set(["direct_messages/events/new.json","direct_messages/welcome_messages/new.json","direct_messages/welcome_messages/rules/new.json","media/metadata/create.json","collections/entries/curate.json"]);he.default=Fe});var Ns=o(ie=>{"use strict";var xe=ie&&ie.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ie,"__esModule",{value:!0});ie.ClientRequestMaker=void 0;var Mi=xe(Oe()),Ii=se(),Oi=xe(Us()),Ai=xe(Ge()),k=xe(ks()),re=class{constructor(){this._rateLimits={}}saveRateLimit(e,t){this._rateLimits[e]=t}send(e){let t=this.getHttpRequestArgs(e),r={method:t.method,headers:t.headers},i=e.enableRateLimitSave!==!1;return t.body&&k.default.setBodyLengthHeader(r,t.body),new Ai.default({url:t.url,options:r,body:t.body,rateLimitSaver:i?this.saveRateLimit.bind(this,t.rawUrl):void 0}).makeRequest()}sendStream(e){let t=this.getHttpRequestArgs(e),r={method:t.method,headers:t.headers},i=e.enableRateLimitSave!==!1,n=e.autoConnect!==!1;t.body&&k.default.setBodyLengthHeader(r,t.body);let a={url:t.url,options:r,body:t.body,rateLimitSaver:i?this.saveRateLimit.bind(this,t.rawUrl):void 0,payloadIsError:e.payloadIsError},u=new Mi.default(a);return n?u.connect():u}buildOAuth(){if(!this._consumerSecret||!this._consumerToken)throw new Error("Invalid consumer tokens");return new Oi.default({consumerKeys:{key:this._consumerToken,secret:this._consumerSecret}})}getOAuthAccessTokens(){if(!(!this._accessSecret||!this._accessToken))return{key:this._accessToken,secret:this._accessSecret}}writeAuthHeaders({headers:e,bodyInSignature:t,url:r,method:i,query:n,body:a}){if(e={...e},this._bearerToken)e.Authorization="Bearer "+this._bearerToken;else if(this._basicToken)e.Authorization="Basic "+this._basicToken;else if(this._consumerSecret&&this._oauth){let u=t?k.default.mergeQueryAndBodyForOAuth(n,a):n,l=this._oauth.authorize({url:r.toString(),method:i,data:u},this.getOAuthAccessTokens());e={...e,...this._oauth.toHeader(l)}}return e}getHttpRequestArgs({url:e,method:t,query:r={},body:i={},headers:n,forceBodyMode:a,enableAuth:u,params:l}){let g;t=t.toUpperCase(),n=n??{},n["x-user-agent"]||(n["x-user-agent"]="Node.twitter-api-v2"),e.startsWith("http")||(e="https://"+e);let c=new URL(e),Le=c.origin+c.pathname;l&&k.default.applyRequestParametersToUrl(c,l);let V=k.default.formatQueryToString(r);k.default.moveUrlQueryParamsIntoObject(c,V),i instanceof Buffer||Ii.trimUndefinedProperties(i);let Ut=a??k.default.autoDetectBodyType(c);if(u!==!1){let Er=re.BODY_METHODS.has(t)&&Ut==="url";n=this.writeAuthHeaders({headers:n,bodyInSignature:Er,method:t,query:V,url:c,body:i})}return re.BODY_METHODS.has(t)&&(g=k.default.constructBodyParams(i,n,Ut)||void 0),k.default.addQueryParamsToUrl(c,V),{rawUrl:Le,url:c,method:t,headers:n,body:g}}};ie.ClientRequestMaker=re;re.BODY_METHODS=new Set(["POST","PUT","PATCH"])});var nt=o(it=>{"use strict";Object.defineProperty(it,"__esModule",{value:!0});var Fi=Ns(),Ue=class extends Fi.ClientRequestMaker{constructor(e){super();if(this._currentUser=null,typeof e=="string")this._bearerToken=e;else if(e instanceof Ue)this._accessToken=e._accessToken,this._accessSecret=e._accessSecret,this._consumerToken=e._consumerToken,this._consumerSecret=e._consumerSecret,this._oauth=e._oauth,this._prefix=e._prefix,this._bearerToken=e._bearerToken,this._basicToken=e._basicToken,this._clientId=e._clientId,this._rateLimits=e._rateLimits;else if(typeof e=="object"&&"appKey"in e)this._consumerToken=e.appKey,this._consumerSecret=e.appSecret,e.accessToken&&e.accessSecret&&(this._accessToken=e.accessToken,this._accessSecret=e.accessSecret),this._oauth=this.buildOAuth();else if(typeof e=="object"&&"username"in e){let t=encodeURIComponent(e.username)+":"+encodeURIComponent(e.password);this._basicToken=Buffer.from(t).toString("base64")}else typeof e=="object"&&"clientId"in e&&(this._clientId=e.clientId)}setPrefix(e){this._prefix=e}cloneWithPrefix(e){let t=this.constructor(this);return t.setPrefix(e),t}getActiveTokens(){return this._bearerToken?{type:"oauth2",bearerToken:this._bearerToken}:this._basicToken?{type:"basic",token:this._basicToken}:this._consumerSecret&&this._oauth?{type:"oauth-1.0a",appKey:this._consumerToken,appSecret:this._consumerSecret,accessToken:this._accessToken,accessSecret:this._accessSecret}:{type:"none"}}hasHitRateLimit(e){var t;return this.isRateLimitStatusObsolete(e)?!1:((t=this.getLastRateLimitStatus(e))===null||t===void 0?void 0:t.remaining)===0}isRateLimitStatusObsolete(e){let t=this.getLastRateLimitStatus(e);return t===void 0?!0:t.reset*1e3<Date.now()}getLastRateLimitStatus(e){let t=e.match(/^https?:\/\//)?e:this._prefix+e;return this._rateLimits[t]}async getCurrentUserObject(e=!1){if(!e&&this._currentUser)return this._currentUser;let t=await this.get("account/verify_credentials.json",{tweet_mode:"extended"},{prefix:"https://api.twitter.com/1.1/"});return this._currentUser=t,t}async get(e,t={},{fullResponse:r,prefix:i=this._prefix,...n}={}){i&&(e=i+e);let a=await this.send({url:e,method:"GET",query:t,...n});return r?a:a.data}async delete(e,t={},{fullResponse:r,prefix:i=this._prefix,...n}={}){i&&(e=i+e);let a=await this.send({url:e,method:"DELETE",query:t,...n});return r?a:a.data}async post(e,t,{fullResponse:r,prefix:i=this._prefix,...n}={}){i&&(e=i+e);let a=await this.send({url:e,method:"POST",body:t,...n});return r?a:a.data}async put(e,t,{fullResponse:r,prefix:i=this._prefix,...n}={}){i&&(e=i+e);let a=await this.send({url:e,method:"PUT",body:t,...n});return r?a:a.data}async patch(e,t,{fullResponse:r,prefix:i=this._prefix,...n}={}){i&&(e=i+e);let a=await this.send({url:e,method:"PATCH",body:t,...n});return r?a:a.data}getStream(e,t,{prefix:r=this._prefix,...i}={}){return this.sendStream({url:r?r+e:e,method:"GET",query:t,...i})}postStream(e,t,{prefix:r=this._prefix,...i}={}){return this.sendStream({url:r?r+e:e,method:"POST",body:t,...i})}};it.default=Ue});var Be=o(_e=>{"use strict";var xi=_e&&_e.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_e,"__esModule",{value:!0});var Ws=xi(nt()),Es=class extends Ws.default{constructor(e){super();if(!(e instanceof Ws.default))throw new Error("You must instance TwitterApiv1 instance from existing TwitterApi instance.");let t=e;this._bearerToken=t._bearerToken,this._consumerToken=t._consumerToken,this._consumerSecret=t._consumerSecret,this._accessToken=t._accessToken,this._accessSecret=t._accessSecret,this._basicToken=t._basicToken,this._oauth=t._oauth,this._clientId=t._clientId,this._rateLimits=t._rateLimits}};_e.default=Es});var at=o(R=>{"use strict";var Ui=R&&R.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(R,"__esModule",{value:!0});R.ListTimelineV1Paginator=R.UserTimelineV1Paginator=R.MentionTimelineV1Paginator=R.HomeTimelineV1Paginator=void 0;var Bi=Ui(K()),me=class extends Bi.default{refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&this._realData.push(...r)}getNextQueryParams(e){let t=BigInt(this._realData[this._realData.length-1].id_str);return{...this.injectQueryParams(e),max_id:(t-BigInt(1)).toString()}}getPageLengthFromRequest(e){return e.data.length}isFetchLastOver(e){return!e.data.length}getItemArray(){return this.tweets}get tweets(){return this._realData}},Vs=class extends me{constructor(){super(...arguments);this._endpoint="statuses/home_timeline.json"}};R.HomeTimelineV1Paginator=Vs;var Hs=class extends me{constructor(){super(...arguments);this._endpoint="statuses/mentions_timeline.json"}};R.MentionTimelineV1Paginator=Hs;var Ks=class extends me{constructor(){super(...arguments);this._endpoint="statuses/user_timeline.json"}};R.UserTimelineV1Paginator=Ks;var $s=class extends me{constructor(){super(...arguments);this._endpoint="lists/statuses.json"}};R.ListTimelineV1Paginator=$s});var ot=o(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.MuteUserIdsV1Paginator=ne.MuteUserListV1Paginator=void 0;var Qs=ae(),zs=class extends Qs.CursoredV1Paginator{constructor(){super(...arguments);this._endpoint="mutes/users/list.json"}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.users.push(...r.users),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.users.length}getItemArray(){return this.users}get users(){return this._realData.users}};ne.MuteUserListV1Paginator=zs;var Xs=class extends Qs.CursoredV1Paginator{constructor(){super(...arguments);this._endpoint="mutes/users/ids.json",this._maxResultsWhenFetchLast=5e3}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.ids.push(...r.ids),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.ids.length}getItemArray(){return this.ids}get ids(){return this._realData.ids}};ne.MuteUserIdsV1Paginator=Xs});var ct=o(O=>{"use strict";var ki=O&&O.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(O,"__esModule",{value:!0});O.FriendshipsOutgoingV1Paginator=O.FriendshipsIncomingV1Paginator=O.UserSearchV1Paginator=void 0;var Ni=ki(K()),Wi=ae(),Cs=class extends Ni.default{constructor(){super(...arguments);this._endpoint="users/search.json"}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&this._realData.push(...r)}getNextQueryParams(e){var t;let r=Number((t=this._queryParams.page)!==null&&t!==void 0?t:"1");return{...this._queryParams,page:r+1,...e?{count:e}:{}}}getPageLengthFromRequest(e){return e.data.length}isFetchLastOver(e){return!e.data.length}getItemArray(){return this.users}get users(){return this._realData}};O.UserSearchV1Paginator=Cs;var ut=class extends Wi.CursoredV1Paginator{constructor(){super(...arguments);this._endpoint="friendships/incoming.json",this._maxResultsWhenFetchLast=5e3}refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.ids.push(...r.ids),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.ids.length}getItemArray(){return this.ids}get ids(){return this._realData.ids}};O.FriendshipsIncomingV1Paginator=ut;var Ys=class extends ut{constructor(){super(...arguments);this._endpoint="friendships/outgoing.json"}};O.FriendshipsOutgoingV1Paginator=Ys});var dt=o(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.ListSubscribersV1Paginator=q.ListMembersV1Paginator=q.ListSubscriptionsV1Paginator=q.ListOwnershipsV1Paginator=q.ListMembershipsV1Paginator=void 0;var Js=ae(),ke=class extends Js.CursoredV1Paginator{refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.lists.push(...r.lists),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.lists.length}getItemArray(){return this.lists}get lists(){return this._realData.lists}},Gs=class extends ke{constructor(){super(...arguments);this._endpoint="lists/memberships.json"}};q.ListMembershipsV1Paginator=Gs;var Zs=class extends ke{constructor(){super(...arguments);this._endpoint="lists/ownerships.json"}};q.ListOwnershipsV1Paginator=Zs;var er=class extends ke{constructor(){super(...arguments);this._endpoint="lists/subscriptions.json"}};q.ListSubscriptionsV1Paginator=er;var lt=class extends Js.CursoredV1Paginator{refreshInstanceFromResult(e,t){let r=e.data;this._rateLimit=e.rateLimit,t&&(this._realData.users.push(...r.users),this._realData.next_cursor=r.next_cursor)}getPageLengthFromRequest(e){return e.data.users.length}getItemArray(){return this.users}get users(){return this._realData.users}},tr=class extends lt{constructor(){super(...arguments);this._endpoint="lists/members.json"}};q.ListMembersV1Paginator=tr;var sr=class extends lt{constructor(){super(...arguments);this._endpoint="lists/subscribers.json"}};q.ListSubscribersV1Paginator=sr});var mt=o(ge=>{"use strict";var rr=ge&&ge.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ge,"__esModule",{value:!0});var Ei=rr(Be()),ht=I(),Vi=se(),Hi=rr(Ne()),fe=at(),ir=ot(),_t=ct(),pe=dt(),nr=class extends Ei.default{constructor(){super(...arguments);this._prefix=ht.API_V1_1_PREFIX}singleTweet(e,t={}){return this.get("statuses/show.json",{tweet_mode:"extended",id:e,...t})}tweets(e,t={}){return this.post("statuses/lookup.json",{tweet_mode:"extended",id:e,...t})}oembedTweet(e,t={}){return this.get("oembed",{url:`https://twitter.com/i/statuses/${e}`,...t},{prefix:"https://publish.twitter.com/"})}async homeTimeline(e={}){let t={tweet_mode:"extended",...e},r=await this.get("statuses/home_timeline.json",t,{fullResponse:!0});return new fe.HomeTimelineV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async mentionTimeline(e={}){let t={tweet_mode:"extended",...e},r=await this.get("statuses/mentions_timeline.json",t,{fullResponse:!0});return new fe.MentionTimelineV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async userTimeline(e,t={}){let r={tweet_mode:"extended",user_id:e,...t},i=await this.get("statuses/user_timeline.json",r,{fullResponse:!0});return new fe.UserTimelineV1Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:r})}async userTimelineByUsername(e,t={}){let r={tweet_mode:"extended",screen_name:e,...t},i=await this.get("statuses/user_timeline.json",r,{fullResponse:!0});return new fe.UserTimelineV1Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:r})}user(e){return this.get("users/show.json",{tweet_mode:"extended",...e})}users(e){return this.get("users/lookup.json",{tweet_mode:"extended",...e})}verifyCredentials(e={}){return this.get("account/verify_credentials.json",e)}async listMutedUsers(e={}){let t={tweet_mode:"extended",...e},r=await this.get("mutes/users/list.json",t,{fullResponse:!0});return new ir.MuteUserListV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async listMutedUserIds(e={}){let t={stringify_ids:!0,...e},r=await this.get("mutes/users/ids.json",t,{fullResponse:!0});return new ir.MuteUserIdsV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async searchUsers(e,t={}){let r={q:e,tweet_mode:"extended",page:1,...t},i=await this.get("users/search.json",r,{fullResponse:!0});return new _t.UserSearchV1Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:r})}friendship(e){return this.get("friendships/show.json",e)}friendships(e){return this.get("friendships/lookup.json",e)}friendshipsNoRetweets(){return this.get("friendships/no_retweets/ids.json",{stringify_ids:!0})}async friendshipsIncoming(e={}){let t={stringify_ids:!0,...e},r=await this.get("friendships/incoming.json",t,{fullResponse:!0});return new _t.FriendshipsIncomingV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async friendshipsOutgoing(e={}){let t={stringify_ids:!0,...e},r=await this.get("friendships/outgoing.json",t,{fullResponse:!0});return new _t.FriendshipsOutgoingV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}accountSettings(){return this.get("account/settings.json")}userProfileBannerSizes(e){return this.get("users/profile_banner.json",e)}list(e){return this.get("lists/show.json",{tweet_mode:"extended",...e})}lists(e={}){return this.get("lists/list.json",{tweet_mode:"extended",...e})}async listMembers(e={}){let t={tweet_mode:"extended",...e},r=await this.get("lists/members.json",t,{fullResponse:!0});return new pe.ListMembersV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}listGetMember(e){return this.get("lists/members/show.json",{tweet_mode:"extended",...e})}async listMemberships(e={}){let t={tweet_mode:"extended",...e},r=await this.get("lists/memberships.json",t,{fullResponse:!0});return new pe.ListMembershipsV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async listOwnerships(e={}){let t={tweet_mode:"extended",...e},r=await this.get("lists/ownerships.json",t,{fullResponse:!0});return new pe.ListOwnershipsV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async listStatuses(e){let t={tweet_mode:"extended",...e},r=await this.get("lists/statuses.json",t,{fullResponse:!0});return new fe.ListTimelineV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}async listSubscribers(e={}){let t={tweet_mode:"extended",...e},r=await this.get("lists/subscribers.json",t,{fullResponse:!0});return new pe.ListSubscribersV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}listGetSubscriber(e){return this.get("lists/subscribers/show.json",{tweet_mode:"extended",...e})}async listSubscriptions(e={}){let t={tweet_mode:"extended",...e},r=await this.get("lists/subscriptions.json",t,{fullResponse:!0});return new pe.ListSubscriptionsV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}mediaInfo(e){return this.get("media/upload.json",{command:"STATUS",media_id:e},{prefix:ht.API_V1_1_UPLOAD_PREFIX})}filterStream({autoConnect:e,...t}={}){let r={};for(let[n,a]of Object.entries(t))if(n==="follow"||n==="track")r[n]=a.toString();else if(n==="locations"){let u=a;r.locations=Vi.arrayWrap(u).map(l=>`${l.lng},${l.lat}`).join(",")}else r[n]=a;return this.stream.postStream("statuses/filter.json",r,{autoConnect:e})}sampleStream({autoConnect:e,...t}={}){return this.stream.getStream("statuses/sample.json",t,{autoConnect:e})}get stream(){let e=new Hi.default(this);return e.setPrefix(ht.API_V1_1_STREAM_PREFIX),e}trendsByPlace(e,t={}){return this.get("trends/place.json",{id:e,...t})}trendsAvailable(){return this.get("trends/available.json")}trendsClosest(e,t){return this.get("trends/closest.json",{lat:e,long:t})}geoPlace(e){return this.get("geo/id/:place_id.json",void 0,{params:{place_id:e}})}geoSearch(e){return this.get("geo/search.json",e)}geoReverseGeoCode(e){return this.get("geo/reverse_geocode.json",e)}rateLimitStatuses(...e){return this.get("application/rate_limit_status.json",{resources:e})}supportedLanguages(){return this.get("help/languages.json")}};ge.default=nr});var or=o(h=>{"use strict";var Ki=h&&h.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),$i=h&&h.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),Qi=h&&h.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&Ki(e,s,t);return $i(e,s),e};Object.defineProperty(h,"__esModule",{value:!0});h.readNextPartOf=h.sleepSecs=h.getMediaCategoryByMime=h.getMimeType=h.getFileSizeFromFileHandle=h.getFileHandle=h.readFileIntoBuffer=void 0;var We=Qi(require("fs"));async function zi(s){let e=await ar(s);return typeof e=="number"?new Promise((t,r)=>{We.readFile(e,(i,n)=>{if(i)return r(i);t(n)})}):e instanceof Buffer?e:e.readFile()}h.readFileIntoBuffer=zi;function ar(s){if(typeof s=="string")return We.promises.open(s,"r");if(typeof s=="number")return s;if(typeof s=="object"&&!(s instanceof Buffer))return s;if(s instanceof Buffer)return s;throw new Error("Given file is not valid, please check its type.")}h.getFileHandle=ar;async function Xi(s){return typeof s=="number"?(await new Promise((t,r)=>{We.fstat(s,(i,n)=>{i&&r(i),t(n)})})).size:s instanceof Buffer?s.length:(await s.stat()).size}h.getFileSizeFromFileHandle=Xi;function Ci(s,e){if(typeof s=="string"&&!e)return Yi(s);if(typeof e=="string")return Ji(e);throw new Error("You must specify type if file is a file handle or Buffer.")}h.getMimeType=Ci;function Yi(s){return s.endsWith(".jpeg")||s.endsWith(".jpg")?"image/jpeg":s.endsWith(".png")?"image/png":s.endsWith(".webp")?"image/webp":s.endsWith(".gif")?"image/gif":s.endsWith(".mpeg4")||s.endsWith(".mp4")?"video/mp4":s.endsWith(".srt")?"text/plain":"image/jpeg"}function Ji(s){return s==="gif"?"image/gif":s==="jpg"?"image/jpeg":s==="png"?"image/png":s==="webp"?"image/webp":s==="srt"?"text/plain":s==="mp4"||s==="longmp4"?"video/mp4":s}function Gi(s,e){return s==="video/mp4"?e==="tweet"?"TweetVideo":"DmVideo":s==="image/gif"?e==="tweet"?"TweetGif":"DmGif":s==="text/plain"?"Subtitles":e==="tweet"?"TweetImage":"DmImage"}h.getMediaCategoryByMime=Gi;function Zi(s){return new Promise(e=>setTimeout(e,s*1e3))}h.sleepSecs=Zi;async function en(s,e,t=0,r){if(s instanceof Buffer){let n=s.slice(t,t+e);return[n,n.length]}if(!r)throw new Error("Well, we will need a buffer to store file content.");let i;return typeof s=="number"?i=await new Promise((n,a)=>{We.read(s,r,0,e,t,(u,l)=>{u&&a(u),n(l)})}):i=(await s.read(r,0,e,t)).bytesRead,[r,i]}h.readNextPartOf=en});var pt=o(j=>{"use strict";var tn=j&&j.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),sn=j&&j.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),rn=j&&j.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&tn(e,s,t);return sn(e,s),e},nn=j&&j.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(j,"__esModule",{value:!0});var Q=I(),an=nn(mt()),ur=rn(require("fs")),A=or(),Ee=se(),ft="media/upload.json",cr=class extends an.default{constructor(){super(...arguments);this._prefix=Q.API_V1_1_PREFIX}get readOnly(){return this}tweet(e,t={}){let r={status:e,tweet_mode:"extended",...t};return this.post("statuses/update.json",r)}async tweetThread(e){let t=[];for(let r of e){let i=t.length?t[t.length-1]:null,n={...typeof r=="string"?{status:r}:r},a=i?i.id_str:n.in_reply_to_status_id,u=n.status;a?t.push(await this.reply(u,a,n)):t.push(await this.tweet(u,n))}return t}reply(e,t,r={}){return this.tweet(e,{auto_populate_reply_metadata:!0,in_reply_to_status_id:t,...r})}deleteTweet(e){return this.post("statuses/destroy/:id.json",{tweet_mode:"extended"},{params:{id:e}})}reportUserAsSpam(e){return this.post("users/report_spam.json",{tweet_mode:"extended",...e})}updateFriendship(e){return this.post("friendships/update.json",e)}updateAccountSettings(e){return this.post("account/settings.json",e)}updateAccountProfile(e){return this.post("account/update_profile.json",e)}async updateAccountProfileBanner(e,t={}){let r={banner:await A.readFileIntoBuffer(e),...t};return this.post("account/update_profile_banner.json",r,{forceBodyMode:"form-data"})}async updateAccountProfileImage(e,t={}){let r={tweet_mode:"extended",image:await A.readFileIntoBuffer(e),...t};return this.post("account/update_profile_image.json",r,{forceBodyMode:"form-data"})}removeAccountProfileBanner(){return this.post("account/remove_profile_banner.json")}createList(e){return this.post("lists/create.json",{tweet_mode:"extended",...e})}updateList(e){return this.post("lists/update.json",{tweet_mode:"extended",...e})}removeList(e){return this.post("lists/destroy.json",{tweet_mode:"extended",...e})}addListMembers(e){let r=e.user_id&&Ee.hasMultipleItems(e.user_id)||e.screen_name&&Ee.hasMultipleItems(e.screen_name)?"lists/members/create_all.json":"lists/members/create.json";return this.post(r,e)}removeListMembers(e){let r=e.user_id&&Ee.hasMultipleItems(e.user_id)||e.screen_name&&Ee.hasMultipleItems(e.screen_name)?"lists/members/destroy_all.json":"lists/members/destroy.json";return this.post(r,e)}subscribeToList(e){return this.post("lists/subscribers/create.json",{tweet_mode:"extended",...e})}unsubscribeOfList(e){return this.post("lists/subscribers/destroy.json",{tweet_mode:"extended",...e})}createMediaMetadata(e,t){return this.post("media/metadata/create.json",{media_id:e,...t},{prefix:Q.API_V1_1_UPLOAD_PREFIX,forceBodyMode:"json"})}createMediaSubtitles(e,t){return this.post("media/subtitles/create.json",{media_id:e,media_category:"TweetVideo",subtitle_info:{subtitles:t}},{prefix:Q.API_V1_1_UPLOAD_PREFIX,forceBodyMode:"json"})}deleteMediaSubtitles(e,...t){return this.post("media/subtitles/delete.json",{media_id:e,media_category:"TweetVideo",subtitle_info:{subtitles:t.map(r=>({language_code:r}))}},{prefix:Q.API_V1_1_UPLOAD_PREFIX,forceBodyMode:"json"})}async uploadMedia(e,t={}){var r;let i=(r=t.chunkLength)!==null&&r!==void 0?r:1024*1024,{fileHandle:n,mediaCategory:a,fileSize:u,mimeType:l}=await this.getUploadMediaRequirements(e,t);try{let g=await this.post(ft,{command:"INIT",total_bytes:u,media_type:l,media_category:a,additional_owners:t.additionalOwners,shared:t.shared?!0:void 0},{prefix:Q.API_V1_1_UPLOAD_PREFIX});await this.mediaChunkedUpload(n,i,g.media_id_string,t.maxConcurrentUploads);let c=await this.post(ft,{command:"FINALIZE",media_id:g.media_id_string},{prefix:Q.API_V1_1_UPLOAD_PREFIX});return c.processing_info&&c.processing_info.state!=="succeeded"&&await this.awaitForMediaProcessingCompletion(c),c.media_id_string}finally{typeof e=="number"?ur.close(e,()=>{}):typeof n=="object"&&!(n instanceof Buffer)&&n.close()}}async awaitForMediaProcessingCompletion(e){for(;;){if(e=await this.mediaInfo(e.media_id_string),!e.processing_info||e.processing_info.state==="succeeded")return;if(e.processing_info.state==="failed")throw new Error("Failed to process the media.");e.processing_info.check_after_secs?await A.sleepSecs(e.processing_info.check_after_secs):await A.sleepSecs(5)}}async getUploadMediaRequirements(e,{type:t,target:r}={}){let i;try{i=await A.getFileHandle(e);let n=A.getMimeType(e,t),a;return t==="longmp4"||t==="video/mp4"&&r!=="dm"?a="amplify_video":a=A.getMediaCategoryByMime(n,r??"tweet"),{fileHandle:i,mediaCategory:a,fileSize:await A.getFileSizeFromFileHandle(i),mimeType:n}}catch(n){throw typeof e=="number"?ur.close(e,()=>{}):typeof i=="object"&&!(i instanceof Buffer)&&i.close(),n}}async mediaChunkedUpload(e,t,r,i=3){let n=0;if(i<1)throw new RangeError("Bad maxConcurrentUploads parameter.");let a=e instanceof Buffer?void 0:Buffer.alloc(t),u,l,g=0;[u,l]=await A.readNextPartOf(e,t,g,a),g+=l;let c=new Set;for(;l;){let Le=u.slice(0,l);if(Le.length){let V=this.post(ft,{command:"APPEND",media_id:r,segment_index:n,media:Le},{prefix:Q.API_V1_1_UPLOAD_PREFIX});c.add(V),V.then(()=>{c.delete(V)}),n++}c.size>=i&&await Promise.race(c),[u,l]=await A.readNextPartOf(e,t,g,a),g+=l}await Promise.all([...c])}};j.default=cr});var Ne=o(z=>{"use strict";var on=z&&z.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(z,"__esModule",{value:!0});z.TwitterApiv1=void 0;var un=I(),lr=Xe(),Ve=ee(),cn=on(pt()),gt=class extends cn.default{constructor(){super(...arguments);this._prefix=un.API_V1_1_PREFIX}get readWrite(){return this}sendDm({recipient_id:e,custom_profile_id:t,...r}){let i={event:{type:Ve.EDirectMessageEventTypeV1.Create,[Ve.EDirectMessageEventTypeV1.Create]:{target:{recipient_id:e},message_data:r}}};return t&&(i.event[Ve.EDirectMessageEventTypeV1.Create].custom_profile_id=t),this.post("direct_messages/events/new.json",i,{forceBodyMode:"json"})}getDmEvent(e){return this.get("direct_messages/events/show.json",{id:e})}deleteDm(e){return this.delete("direct_messages/events/destroy.json",{id:e})}async listDmEvents(e={}){let t={...e},r=await this.get("direct_messages/events/list.json",t,{fullResponse:!0});return new lr.DmEventsV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}newWelcomeDm(e,t){let r={[Ve.EDirectMessageEventTypeV1.WelcomeCreate]:{name:e,message_data:t}};return this.post("direct_messages/welcome_messages/new.json",r,{forceBodyMode:"json"})}getWelcomeDm(e){return this.get("direct_messages/welcome_messages/show.json",{id:e})}deleteWelcomeDm(e){return this.delete("direct_messages/welcome_messages/destroy.json",{id:e})}updateWelcomeDm(e,t){let r={message_data:t};return this.put("direct_messages/welcome_messages/update.json",r,{forceBodyMode:"json",query:{id:e}})}async listWelcomeDms(e={}){let t={...e},r=await this.get("direct_messages/welcome_messages/list.json",t,{fullResponse:!0});return new lr.WelcomeDmV1Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t})}newWelcomeDmRule(e){return this.post("direct_messages/welcome_messages/rules/new.json",{welcome_message_rule:{welcome_message_id:e}},{forceBodyMode:"json"})}getWelcomeDmRule(e){return this.get("direct_messages/welcome_messages/rules/show.json",{id:e})}deleteWelcomeDmRule(e){return this.delete("direct_messages/welcome_messages/rules/destroy.json",{id:e})}async listWelcomeDmRules(e={}){let t={...e};return this.get("direct_messages/welcome_messages/rules/list.json",t)}async setWelcomeDm(e,t=!0){var r;let i=await this.listWelcomeDmRules();if((r=i.welcome_message_rules)===null||r===void 0?void 0:r.length)for(let n of i.welcome_message_rules)await this.deleteWelcomeDmRule(n.id),t&&await this.deleteWelcomeDm(n.welcome_message_id);return this.newWelcomeDmRule(e)}markDmAsRead(e,t){return this.post("direct_messages/mark_read.json",{last_read_event_id:e,recipient_id:t},{forceBodyMode:"url"})}indicateDmTyping(e){return this.post("direct_messages/indicate_typing.json",{recipient_id:e},{forceBodyMode:"url"})}};z.TwitterApiv1=gt;z.default=gt});var gr=o(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});S.TweetV2UserLikedTweetsPaginator=S.TweetUserMentionTimelineV2Paginator=S.TweetUserTimelineV2Paginator=S.TweetSearchAllV2Paginator=S.TweetSearchRecentV2Paginator=void 0;var ln=K(),wt=class extends ln.PreviousableTwitterPaginator{updateIncludes(e){if(!e.includes)return;this._realData.includes||(this._realData.includes={});let t=this._realData.includes;for(let[r,i]of Object.entries(e.includes))t[r]||(t[r]=[]),t[r]=[...t[r],...i]}getPageLengthFromRequest(e){var t,r;return(r=(t=e.data.data)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0}isFetchLastOver(e){var t;return!((t=e.data.data)===null||t===void 0?void 0:t.length)||!e.data.meta.next_token}getItemArray(){return this.tweets}get tweets(){var e;return(e=this._realData.data)!==null&&e!==void 0?e:[]}get meta(){return this._realData.meta}get includes(){var e;return(e=this._realData.includes)!==null&&e!==void 0?e:{}}},we=class extends wt{refreshInstanceFromResult(e,t){var r;let i=e.data,n=(r=i.data)!==null&&r!==void 0?r:[];this._rateLimit=e.rateLimit,this._realData.data||(this._realData.data=[]),t?(this._realData.meta.oldest_id=i.meta.oldest_id,this._realData.meta.result_count+=i.meta.result_count,this._realData.meta.next_token=i.meta.next_token,this._realData.data.push(...n)):(this._realData.meta.newest_id=i.meta.newest_id,this._realData.meta.result_count+=i.meta.result_count,this._realData.data.unshift(...n)),this.updateIncludes(i)}getNextQueryParams(e){return{...this.injectQueryParams(e),until_id:this._realData.meta.oldest_id}}getPreviousQueryParams(e){return{...this.injectQueryParams(e),since_id:this._realData.meta.newest_id}}},dr=class extends we{constructor(){super(...arguments);this._endpoint="tweets/search/recent"}};S.TweetSearchRecentV2Paginator=dr;var hr=class extends we{constructor(){super(...arguments);this._endpoint="tweets/search/all"}};S.TweetSearchAllV2Paginator=hr;var _r=class extends we{constructor(){super(...arguments);this._endpoint="users/:id/tweets"}};S.TweetUserTimelineV2Paginator=_r;var mr=class extends we{constructor(){super(...arguments);this._endpoint="users/:id/mentions"}};S.TweetUserMentionTimelineV2Paginator=mr;var fr=class extends wt{refreshInstanceFromResult(e,t){var r;let i=e.data,n=(r=i.data)!==null&&r!==void 0?r:[];this._rateLimit=e.rateLimit,this._realData.data||(this._realData.data=[]),t?(this._realData.meta.result_count+=i.meta.result_count,this._realData.meta.next_token=i.meta.next_token,this._realData.data.push(...n)):(this._realData.meta.result_count+=i.meta.result_count,this._realData.meta.previous_token=i.meta.previous_token,this._realData.data.unshift(...n)),this.updateIncludes(i)}getNextQueryParams(e){return{...this.injectQueryParams(e),pagination_token:this._realData.meta.next_token}}getPreviousQueryParams(e){return{...this.injectQueryParams(e),pagination_token:this._realData.meta.previous_token}}},pr=class extends fr{constructor(){super(...arguments);this._endpoint="users/:id/liked_tweets"}};S.TweetV2UserLikedTweetsPaginator=pr});var yt=o(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});F.UserFollowingV2Paginator=F.UserFollowersV2Paginator=F.UserMutingUsersV2Paginator=F.UserBlockingUsersV2Paginator=void 0;var dn=K(),ye=class extends dn.PreviousableTwitterPaginator{refreshInstanceFromResult(e,t){var r;let i=e.data,n=(r=i.data)!==null&&r!==void 0?r:[];this._rateLimit=e.rateLimit,this._realData.data||(this._realData.data=[]),t?(this._realData.meta.result_count+=i.meta.result_count,this._realData.meta.next_token=i.meta.next_token,this._realData.data.push(...n)):(this._realData.meta.result_count+=i.meta.result_count,this._realData.meta.previous_token=i.meta.previous_token,this._realData.data.unshift(...n)),this.updateIncludes(i)}updateIncludes(e){if(!e.includes)return;this._realData.includes||(this._realData.includes={});let t=this._realData.includes;for(let[r,i]of Object.entries(e.includes))t[r]||(t[r]=[]),t[r]=[...t[r],...i]}getNextQueryParams(e){return{...this.injectQueryParams(e),pagination_token:this._realData.meta.next_token}}getPreviousQueryParams(e){return{...this.injectQueryParams(e),pagination_token:this._realData.meta.previous_token}}getPageLengthFromRequest(e){var t,r;return(r=(t=e.data.data)===null||t===void 0?void 0:t.length)!==null&&r!==void 0?r:0}isFetchLastOver(e){var t;return!((t=e.data.data)===null||t===void 0?void 0:t.length)||!e.data.meta.next_token}getItemArray(){return this.users}get users(){var e;return(e=this._realData.data)!==null&&e!==void 0?e:[]}get meta(){return this._realData.meta}get includes(){var e;return(e=this._realData.includes)!==null&&e!==void 0?e:{}}},wr=class extends ye{constructor(){super(...arguments);this._endpoint="users/:id/blocking"}};F.UserBlockingUsersV2Paginator=wr;var yr=class extends ye{constructor(){super(...arguments);this._endpoint="users/:id/muting"}};F.UserMutingUsersV2Paginator=yr;var vr=class extends ye{constructor(){super(...arguments);this._endpoint="users/:id/followers"}};F.UserFollowersV2Paginator=vr;var Pr=class extends ye{constructor(){super(...arguments);this._endpoint="users/:id/following"}};F.UserFollowingV2Paginator=Pr});var vt=o(w=>{"use strict";var hn=w&&w.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),W=w&&w.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&hn(e,s,t)};Object.defineProperty(w,"__esModule",{value:!0});W(gr(),w);W(K(),w);W(Xe(),w);W(ot(),w);W(at(),w);W(ct(),w);W(yt(),w);W(dt(),w)});var Pt=o(ve=>{"use strict";var _n=ve&&ve.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ve,"__esModule",{value:!0});var mn=_n(Be()),fn=I(),br=class extends mn.default{constructor(){super(...arguments);this._prefix=fn.API_V2_LABS_PREFIX}};ve.default=br});var bt=o(be=>{"use strict";var Tr=be&&be.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(be,"__esModule",{value:!0});var pn=Tr(Be()),gn=I(),Pe=vt(),wn=Tr(Pt()),He=yt(),Rr=se(),qr=class extends pn.default{constructor(){super(...arguments);this._prefix=gn.API_V2_PREFIX}get labs(){return this._labs?this._labs:this._labs=new wn.default(this)}async search(e,t={}){let r={...t,query:e},i=await this.get("tweets/search/recent",r,{fullResponse:!0});return new Pe.TweetSearchRecentV2Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:r})}async searchAll(e,t={}){let r={...t,query:e},i=await this.get("tweets/search/all",r,{fullResponse:!0});return new Pe.TweetSearchAllV2Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:r})}singleTweet(e,t={}){return this.get("tweets/:id",t,{params:{id:e}})}tweets(e,t={}){return this.get("tweets",{ids:e,...t})}tweetCountRecent(e,t={}){return this.get("tweets/counts/recent",{query:e,...t})}tweetCountAll(e,t={}){return this.get("tweets/counts/all",{query:e,...t})}tweetRetweetedBy(e,t={}){return this.get("tweets/:id/retweeted_by",t,{params:{id:e}})}tweetLikedBy(e,t={}){return this.get("tweets/:id/liking_users",t,{params:{id:e}})}async userTimeline(e,t={}){let r=await this.get("users/:id/tweets",t,{fullResponse:!0,params:{id:e}});return new Pe.TweetUserTimelineV2Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t,sharedParams:{id:e}})}async userMentionTimeline(e,t={}){let r=await this.get("users/:id/mentions",t,{fullResponse:!0,params:{id:e}});return new Pe.TweetUserMentionTimelineV2Paginator({realData:r.data,rateLimit:r.rateLimit,instance:this,queryParams:t,sharedParams:{id:e}})}user(e,t={}){return this.get("users/:id",t,{params:{id:e}})}users(e,t={}){let r=Array.isArray(e)?e.join(","):e;return this.get("users",{...t,ids:r})}userByUsername(e,t={}){return this.get("users/by/username/:username",t,{params:{username:e}})}usersByUsernames(e,t={}){return e=Array.isArray(e)?e.join(","):e,this.get("users/by",{...t,usernames:e})}async followers(e,t={}){let{asPaginator:r,...i}=t,n={id:e};if(!r)return this.get("users/:id/followers",i,{params:n});let a=await this.get("users/:id/followers",i,{fullResponse:!0,params:n});return new He.UserFollowersV2Paginator({realData:a.data,rateLimit:a.rateLimit,instance:this,queryParams:i,sharedParams:n})}async following(e,t={}){let{asPaginator:r,...i}=t,n={id:e};if(!r)return this.get("users/:id/following",i,{params:n});let a=await this.get("users/:id/following",i,{fullResponse:!0,params:n});return new He.UserFollowingV2Paginator({realData:a.data,rateLimit:a.rateLimit,instance:this,queryParams:i,sharedParams:n})}async userLikedTweets(e,t={}){let r={id:e},i=await this.get("users/:id/liked_tweets",t,{fullResponse:!0,params:r});return new Pe.TweetV2UserLikedTweetsPaginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:{...t},sharedParams:r})}async userBlockingUsers(e,t={}){let r={id:e},i=await this.get("users/:id/blocking",t,{fullResponse:!0,params:r});return new He.UserBlockingUsersV2Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:{...t},sharedParams:r})}async userMutingUsers(e={}){let{id_str:t}=await this.getCurrentUserObject(),r={id:t},i=await this.get("users/:id/muting",e,{fullResponse:!0,params:r});return new He.UserMutingUsersV2Paginator({realData:i.data,rateLimit:i.rateLimit,instance:this,queryParams:{...e},sharedParams:r})}space(e,t={}){return this.get("spaces/:id",t,{params:{id:e}})}spaces(e,t={}){return this.get("spaces",{ids:e,...t})}spacesByCreators(e,t={}){return this.get("spaces/by/creator_ids",{user_ids:e,...t})}searchSpaces(e){return this.get("spaces/search",e)}searchStream({autoConnect:e,...t}={}){return this.getStream("tweets/search/stream",t,{payloadIsError:Rr.isTweetStreamV2ErrorPayload,autoConnect:e})}streamRules(e={}){return this.get("tweets/search/stream/rules",e)}updateStreamRules(e,t={}){return this.post("tweets/search/stream/rules",e,{query:t})}sampleStream({autoConnect:e,...t}={}){return this.getStream("tweets/sample/stream",t,{payloadIsError:Rr.isTweetStreamV2ErrorPayload,autoConnect:e})}complianceJobs(e){return this.get("compliance/jobs",e)}complianceJob(e){return this.get("compliance/jobs/:id",void 0,{params:{id:e}})}async sendComplianceJob(e){let t=await this.post("compliance/jobs",{type:e.type,name:e.name}),r=e.ids instanceof Buffer?e.ids:Buffer.from(e.ids.join(`
`));return await this.put(t.data.upload_url,r,{forceBodyMode:"raw",enableAuth:!1,headers:{"Content-Type":"text/plain"},prefix:""}),t}async complianceJobResult(e){let t=e;for(;t.status!=="complete";){if(t.status==="expired"||t.status==="failed")throw new Error("Job failed to be completed.");await new Promise(i=>setTimeout(i,3500)),t=(await this.complianceJob(e.id)).data}return(await this.get(e.download_url,void 0,{enableAuth:!1,prefix:""})).trim().split(`
`).filter(i=>i).map(i=>JSON.parse(i))}};be.default=qr});var Tt=o(Te=>{"use strict";var yn=Te&&Te.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Te,"__esModule",{value:!0});var vn=I(),Pn=yn(Pt()),Sr=class extends Pn.default{constructor(){super(...arguments);this._prefix=vn.API_V2_LABS_PREFIX}get readOnly(){return this}};Te.default=Sr});var Rt=o(Re=>{"use strict";var Dr=Re&&Re.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Re,"__esModule",{value:!0});var bn=I(),Tn=Dr(bt()),Rn=Dr(Tt()),Lr=class extends Tn.default{constructor(){super(...arguments);this._prefix=bn.API_V2_PREFIX}get readOnly(){return this}get labs(){return this._labs?this._labs:this._labs=new Rn.default(this)}hideReply(e,t){return this.put("tweets/:id/hidden",{hidden:t},{params:{id:e}})}like(e,t){return this.post("users/:id/likes",{tweet_id:t},{params:{id:e}})}unlike(e,t){return this.delete("users/:id/likes/:tweet_id",void 0,{params:{id:e,tweet_id:t}})}retweet(e,t){return this.post("users/:id/retweets",{tweet_id:t},{params:{id:e}})}unretweet(e,t){return this.delete("users/:id/retweets/:tweet_id",void 0,{params:{id:e,tweet_id:t}})}follow(e,t){return this.post("users/:id/following",{target_user_id:t},{params:{id:e}})}unfollow(e,t){return this.delete("users/:source_user_id/following/:target_user_id",void 0,{params:{source_user_id:e,target_user_id:t}})}block(e,t){return this.post("users/:id/blocking",{target_user_id:t},{params:{id:e}})}unblock(e,t){return this.delete("users/:source_user_id/blocking/:target_user_id",void 0,{params:{source_user_id:e,target_user_id:t}})}mute(e,t){return this.post("users/:id/muting",{target_user_id:t},{params:{id:e}})}unmute(e,t){return this.delete("users/:source_user_id/muting/:target_user_id",void 0,{params:{source_user_id:e,target_user_id:t}})}createList(e){return this.post("lists",e)}updateList(e,t={}){return this.put("lists/:id",t,{params:{id:e}})}removeList(e){return this.delete("lists/:id",void 0,{params:{id:e}})}addListMember(e,t){return this.post("lists/:id/members",{user_id:t},{params:{id:e}})}removeListMember(e,t){return this.delete("lists/:id/members/:user_id",void 0,{params:{id:e,user_id:t}})}subscribeToList(e,t){return this.post("users/:id/followed_lists",{list_id:t},{params:{id:e}})}unsubscribeOfList(e,t){return this.delete("users/:id/followed_lists/:list_id",void 0,{params:{id:e,list_id:t}})}pinList(e,t){return this.post("users/:id/pinned_lists",{list_id:t},{params:{id:e}})}unpinList(e,t){return this.delete("users/:id/pinned_lists/:list_id",void 0,{params:{id:e,list_id:t}})}};Re.default=Lr});var St=o(X=>{"use strict";var qn=X&&X.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(X,"__esModule",{value:!0});X.TwitterApiv2Labs=void 0;var Sn=I(),Dn=qn(Tt()),qt=class extends Dn.default{constructor(){super(...arguments);this._prefix=Sn.API_V2_LABS_PREFIX}get readWrite(){return this}};X.TwitterApiv2Labs=qt;X.default=qt});var Lt=o(C=>{"use strict";var jr=C&&C.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(C,"__esModule",{value:!0});C.TwitterApiv2=void 0;var Ln=I(),jn=jr(Rt()),Mn=jr(St()),Dt=class extends jn.default{constructor(){super(...arguments);this._prefix=Ln.API_V2_PREFIX}get readWrite(){return this}get labs(){return this._labs?this._labs:this._labs=new Mn.default(this)}};C.TwitterApiv2=Dt;C.default=Dt});var Ir=o(x=>{"use strict";var In=x&&x.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),On=x&&x.__setModuleDefault||(Object.create?function(s,e){Object.defineProperty(s,"default",{enumerable:!0,value:e})}:function(s,e){s.default=e}),An=x&&x.__importStar||function(s){if(s&&s.__esModule)return s;var e={};if(s!=null)for(var t in s)t!=="default"&&Object.prototype.hasOwnProperty.call(s,t)&&In(e,s,t);return On(e,s),e};Object.defineProperty(x,"__esModule",{value:!0});x.OAuth2Helper=void 0;var Fn=An(require("crypto")),Mr=class{static getCodeVerifier(){return this.generateRandomString(128)}static getCodeChallengeFromVerifier(e){return this.escapeBase64Url(Fn.createHash("sha256").update(e).digest("base64"))}static generateRandomString(e){let t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";for(let i=0;i<e;i++)t+=r[Math.floor(Math.random()*r.length)];return t}static escapeBase64Url(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}};x.OAuth2Helper=Mr});var Mt=o(qe=>{"use strict";var Ke=qe&&qe.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(qe,"__esModule",{value:!0});var $e=Ke(Qe()),xn=Ke(nt()),Un=Ke(mt()),Bn=Ke(bt()),jt=Ir(),Or=class extends xn.default{get v1(){return this._v1?this._v1:this._v1=new Un.default(this)}get v2(){return this._v2?this._v2:this._v2=new Bn.default(this)}async currentUser(e=!1){return await this.getCurrentUserObject(e)}search(e,t){return this.v2.search(e,t)}async generateAuthLink(e="oob",{authAccessType:t,linkMode:r="authenticate",forceLogin:i,screenName:n}={}){let a=await this.post("https://api.twitter.com/oauth/request_token",{oauth_callback:e,x_auth_access_type:t}),u=`https://api.twitter.com/oauth/${r}?oauth_token=${encodeURIComponent(a.oauth_token)}`;return i!==void 0&&(u+=`&force_login=${encodeURIComponent(i)}`),n!==void 0&&(u+=`&screen_name=${encodeURIComponent(n)}`),{url:u,...a}}async login(e){let t=await this.post("https://api.twitter.com/oauth/access_token",{oauth_token:this._accessToken,oauth_verifier:e}),r=new $e.default({appKey:this._consumerToken,appSecret:this._consumerSecret,accessToken:t.oauth_token,accessSecret:t.oauth_token_secret});return{accessToken:t.oauth_token,accessSecret:t.oauth_token_secret,userId:t.user_id,screenName:t.screen_name,client:r}}async appLogin(){if(!this._consumerToken||!this._consumerSecret)throw new Error("You must setup TwitterApi instance with consumers to enable app-only login");let t=await new $e.default({username:this._consumerToken,password:this._consumerSecret}).post("https://api.twitter.com/oauth2/token",{grant_type:"client_credentials"});return new $e.default(t.access_token)}generateOAuth2AuthLink(e,t={}){var r,i;if(!this._clientId)throw new Error("Twitter API instance is not initialized with client ID. Please build an instance with: new TwitterApi({ clientId: '<yourClientId>' })");let n=(r=t.state)!==null&&r!==void 0?r:jt.OAuth2Helper.generateRandomString(32),a=jt.OAuth2Helper.getCodeVerifier(),u=jt.OAuth2Helper.getCodeChallengeFromVerifier(a),l=(i=t.scope)!==null&&i!==void 0?i:"",g=Array.isArray(l)?l.join(" "):l,c=new URL("https://twitter.com/i/oauth2/authorize");return c.searchParams.set("response_type","code"),c.searchParams.set("client_id",this._clientId),c.searchParams.set("redirect_uri",e),c.searchParams.set("state",n),c.searchParams.set("code_challenge",u),c.searchParams.set("code_challenge_method","s256"),c.searchParams.set("scope",g),{url:c.toString(),state:n,codeVerifier:a,codeChallenge:u}}async loginWithOAuth2({code:e,codeVerifier:t,redirectUri:r}){if(!this._clientId)throw new Error("Twitter API instance is not initialized with client ID. Please build an instance with: new TwitterApi({ clientId: '<yourClientId>' })");let i=await this.post("https://api.twitter.com/2/oauth2/token",{code:e,code_verifier:t,redirect_uri:r,grant_type:"authorization_code",client_id:this._clientId});return this.parseOAuth2AccessTokenResult(i)}async refreshOAuth2Token(e){if(!this._clientId)throw new Error("Twitter API instance is not initialized with client ID. Please build an instance with: new TwitterApi({ clientId: '<yourClientId>' })");let t=await this.post("https://api.twitter.com/2/oauth2/token",{refresh_token:e,grant_type:"refresh_token",client_id:this._clientId});return this.parseOAuth2AccessTokenResult(t)}async revokeOAuth2Token(e,t="access_token"){if(!this._clientId)throw new Error("Twitter API instance is not initialized with client ID. Please build an instance with: new TwitterApi({ clientId: '<yourClientId>' })");return await this.post("https://api.twitter.com/2/oauth2/revoke",{client_id:this._clientId,token:e,token_type_hint:t})}parseOAuth2AccessTokenResult(e){let t=new $e.default(e.access_token),r=e.scope.split(" ").filter(i=>i);return{client:t,expiresIn:e.expires_in,accessToken:e.access_token,scope:r,refreshToken:e.refresh_token}}};qe.default=Or});var Ot=o(Se=>{"use strict";var It=Se&&Se.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Se,"__esModule",{value:!0});var kn=It(pt()),Nn=It(Rt()),Wn=It(Mt()),Ar=class extends Wn.default{get v1(){return this._v1?this._v1:this._v1=new kn.default(this)}get v2(){return this._v2?this._v2:this._v2=new Nn.default(this)}get readOnly(){return this}};Se.default=Ar});var Qe=o(M=>{"use strict";var De=M&&M.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(M,"__esModule",{value:!0});M.TwitterApiReadOnly=M.TwitterApiReadWrite=M.TwitterApi=void 0;var En=De(Ne()),Vn=De(Lt()),Hn=De(Ot()),At=class extends Hn.default{get v1(){return this._v1?this._v1:this._v1=new En.default(this)}get v2(){return this._v2?this._v2:this._v2=new Vn.default(this)}get readWrite(){return this}static getErrors(e){var t;return typeof e!="object"?[]:"data"in e?(t=e.data.errors)!==null&&t!==void 0?t:[]:[]}static getProfileImageInSize(e,t){let r=e.split("/").pop(),i=["normal","bigger","mini"],n=e;for(let u of i)if(r.includes(`_${u}`)){n=e.replace(`_${u}`,"");break}if(t==="original")return n;let a=n.lastIndexOf(".");if(a!==-1){let u=n.slice(a+1);return n.slice(0,a)+"_"+t+"."+u}else return n+"_"+t}};M.TwitterApi=At;var Kn=Ot();Object.defineProperty(M,"TwitterApiReadWrite",{enumerable:!0,get:function(){return De(Kn).default}});var $n=Mt();Object.defineProperty(M,"TwitterApiReadOnly",{enumerable:!0,get:function(){return De($n).default}});M.default=At});var Fr=o(_=>{"use strict";var Qn=_&&_.__createBinding||(Object.create?function(s,e,t,r){r===void 0&&(r=t),Object.defineProperty(s,r,{enumerable:!0,get:function(){return e[t]}})}:function(s,e,t,r){r===void 0&&(r=t),s[r]=e[t]}),E=_&&_.__exportStar||function(s,e){for(var t in s)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Qn(e,s,t)},zn=_&&_.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(_,"__esModule",{value:!0});_.default=void 0;var Xn=Qe();Object.defineProperty(_,"default",{enumerable:!0,get:function(){return zn(Xn).default}});E(Qe(),_);E(Ne(),_);E(Lt(),_);E(St(),_);E(ee(),_);E(vt(),_);E(Oe(),_);E(Ie(),_)});var Wr=require("@raycast/api");var m=require("@raycast/api");var xr=require("@raycast/api"),Ur=require("react"),Br=Cr(Fr());function Ft(s){return s instanceof Error?s.message:"unknown error"}var ro=new Intl.NumberFormat("en",{notation:"compact"});function Cn(){let s=(0,xr.getPreferenceValues)(),e=s.appkey||"",t=s.appsecret||"",r=s.accesstoken||"",i=s.accesssecret||"";return new Br.TwitterApi({appKey:e,appSecret:t,accessToken:r,accessSecret:i})}var xt=Cn();async function kr(s,e){try{let t=s.text;if(t.length<0)throw Error("Please enter a text");if(t.length>280)throw Error("Tweet text could not be longer than 280 characters");e?(await xt.v1.reply(t,e.id_str),await(0,m.showToast)(m.ToastStyle.Success,"Tweet created","Reply Tweet creation successful")):(await xt.v1.tweet(t),await(0,m.showToast)(m.ToastStyle.Success,"Tweet created","Tweet creation successful")),(0,m.popToRoot)()}catch(t){await(0,m.showToast)(m.ToastStyle.Failure,"Error",Ft(t))}}function Nr(s){let e=s.replyTweet;return _jsx(m.Form,{onSubmit:kr,actions:_jsx(m.ActionPanel,null,_jsx(m.SubmitFormAction,{title:e?"Send Reply":"Send Tweet",onSubmit:i=>kr(i,e)}))},_jsx(m.FormTextArea,{id:"text",title:e?"Reply":"Tweet",placeholder:"What's happening?"}))}(0,Wr.render)(_jsx(Nr,null));
